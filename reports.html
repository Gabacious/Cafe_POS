<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kapihan ni Boss G POS - Sales Reports</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .bg-cafe { background-color: #5d4037 !important; }
        /* --- NEW LOGO CSS --- */
        .navbar-logo {
            height: 30px; /* Adjust height as needed */
            margin-right: 8px;
            vertical-align: middle;
        }
        /* --- END LOGO CSS --- */
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-cafe shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="#">
                <img src="logo_bossg.png" alt="Kapihan ni Boss G Logo" class="navbar-logo">
                Kapihan ni Boss G POS (Admin)
            </a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="navLinks">
                    </ul>
                <a href="login.html" class="btn btn-outline-light" onclick="localStorage.clear()">Logout</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h3 class="mb-4 text-secondary">Detailed Sales Reports</h3>

        <div class="card shadow mb-4">
            <div class="card-header bg-primary text-white">Report Generation</div>
            <div class="card-body">
                <form class="row g-3">
                    <div class="col-md-5">
                        <label for="startDate" class="form-label">Start Date</label>
                        <input type="date" class="form-control" id="startDate" value="2025-01-01">
                    </div>
                    <div class="col-md-5">
                        <label for="endDate" class="form-label">End Date</label>
                        <input type="date" class="form-control" id="endDate" value="2025-12-14">
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button type="button" class="btn btn-success w-100" onclick="generateReport()">Generate</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="report-output">
            <h4 class="text-info mt-5">Daily Sales Summary (Simulated)</h4>
            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Total Sales (₱)</th>
                            <th>Total Orders</th>
                            <th>Avg Order Value (₱)</th>
                        </tr>
                    </thead>
                    <tbody id="sales-summary-body">
                        </tbody>
                </table>
            </div>

            <h4 class="text-info mt-5">Product Performance (Top 5)</h4>
            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Product Name</th>
                            <th>Quantity Sold</th>
                            <th>Revenue (₱)</th>
                        </tr>
                    </thead>
                    <tbody id="product-performance-body">
                        </tbody>
                </table>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            checkAdminAccess();
            renderNav();
            generateReport(); // Generate a default report on load
        });

        // --- AUTHENTICATION & NAVIGATION ---

        function checkAdminAccess() {
            const userRole = localStorage.getItem('userRole');
            if (userRole !== 'Admin') {
                alert("Access Denied. You must be logged in as an Admin to view Reports.");
                window.location.href = 'login.html';
                return;
            }
        }

        function renderNav() {
            const navLinks = document.getElementById('navLinks');
            navLinks.innerHTML = `
                <li class="nav-item"><a class="nav-link" href="dashboard.html">Dashboard</a></li>
                <li class="nav-item"><a class="nav-link" href="orders.html">Orders</a></li>
                <li class="nav-item"><a class="nav-link" href="product_management.html">Products</a></li>
                <li class="nav-item"><a class="nav-link active" href="reports.html">Reports</a></li>
                <li class="nav-item"><a class="nav-link" href="user_settings.html">Users & Settings</a></li>
            `;
        }

        // --- REPORT GENERATION (Simulated Data) ---

        function generateReport() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            // In a real system, these dates would filter server data. 
            alert(`Generating simulated report for period: ${startDate} to ${endDate}`);
            
            renderSalesSummary();
            renderProductPerformance();
        }

        function renderSalesSummary() {
            const tbody = document.getElementById('sales-summary-body');
            tbody.innerHTML = '';
            
            // Simulated Daily Sales Data
            const summaryData = [
                { date: '2025-12-12', sales: 12500.00, orders: 35, avg: 357.14 },
                { date: '2025-12-13', sales: 15435.50, orders: 42, avg: 367.51 },
                { date: '2025-12-14', sales: 16102.75, orders: 45, avg: 357.84 }
            ];

            summaryData.forEach(data => {
                const row = `
                    <tr>
                        <td>${data.date}</td>
                        <td>₱${data.sales.toFixed(2)}</td>
                        <td>${data.orders}</td>
                        <td>₱${data.avg.toFixed(2)}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function renderProductPerformance() {
            const tbody = document.getElementById('product-performance-body');
            tbody.innerHTML = '';

            // Simulated Product Performance Data (Top 5)
            const performanceData = [
                { rank: 1, name: 'Latte', quantity: 78, revenue: 10500.00 },
                { rank: 2, name: 'Spaghetti', quantity: 55, revenue: 9500.00 },
                { rank: 3, name: 'Muffin', quantity: 90, revenue: 8100.00 },
                { rank: 4, name: 'Americano', quantity: 62, revenue: 7800.00 },
                { rank: 5, name: 'Croissant', quantity: 85, revenue: 7650.00 }
            ];

            performanceData.forEach(data => {
                const row = `
                    <tr>
                        <td>${data.rank}</td>
                        <td>${data.name}</td>
                        <td>${data.quantity}</td>
                        <td>₱${data.revenue.toFixed(2)}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }
    </script>
</body>
</html>