<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kapihan ni Boss G POS - Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .login-container {
            max-width: 400px;
            width: 100%;
            padding: 20px;
        }
        .bg-cafe { background-color: #5d4037 !important; }
        .text-cafe { color: #5d4037 !important; }
        /* --- UPDATED LOGO CSS --- */
        .header-logo {
            height: 40px; 
            margin-right: 10px;
            vertical-align: middle;
            /* REMOVED: filter: invert(100%); */
        }
        /* --- END LOGO CSS --- */
    </style>
</head>
<body>
    <div class="login-container">
        <div class="card shadow-lg border-0">
            <div class="card-header bg-cafe text-white text-center py-3">
                <h4 class="mb-0 fw-bold">
                    <img src="logo_bossg.png" alt="Kapihan ni Boss G Logo" class="header-logo">
                    Kapihan ni Boss G POS
                </h4>
                <small>Staff Login</small>
            </div>
            <div class="card-body p-4">
                <form id="loginForm">
                    <div class="mb-3">
                        <label for="username" class="form-label text-cafe fw-bold">Username</label>
                        <input type="text" class="form-control" id="username" required>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label text-cafe fw-bold">Password</label>
                        <input type="password" class="form-control" id="password" required>
                    </div>
                    <div class="mb-3">
                        <label for="role" class="form-label text-cafe fw-bold">Login As</label>
                        <select class="form-select" id="role" required>
                            <option value="Cashier">Cashier</option>
                            <option value="Admin">Admin</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary bg-cafe border-0 w-100 mt-2">LOGIN</button>
                    
                    <div class="mt-4 p-2 border rounded bg-light">
                        <small class="d-block">**Demo Credentials**</small>
                        <small>Admin: u: `admin` | p: `adminpass`</small><br>
                        <small>Cashier: u: `cashier` | p: `cashierpass`</small>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const role = document.getElementById('role').value;
            
            // Get users from localStorage or use defaults
            const users = JSON.parse(localStorage.getItem('posUsers')) || {
                'admin': { username: 'admin', password: 'adminpass', role: 'Admin' },
                'cashier': { username: 'cashier', password: 'cashierpass', role: 'Cashier' }
            };

            const user = users[username];

            if (user && user.password === password && user.role === role) {
                // Successful login
                localStorage.setItem('userRole', role);
                localStorage.setItem('currentUser', username);
                
                if (role === 'Admin') {
                    window.location.href = 'dashboard.html';
                } else {
                    window.location.href = 'orders.html';
                }
            } else {
                alert('Invalid credentials or role combination.');
            }
        });
        
        // Clear local storage temp access on load to ensure a fresh session
        localStorage.removeItem('tempAdminAccess');
        
        // Ensure default users are loaded if starting fresh
        if (!localStorage.getItem('posUsers')) {
            localStorage.setItem('posUsers', JSON.stringify({
                'admin': { username: 'admin', password: 'adminpass', role: 'Admin' },
                'cashier': { username: 'cashier', password: 'cashierpass', role: 'Cashier' }
            }));
        }
    </script>
</body>
</html>